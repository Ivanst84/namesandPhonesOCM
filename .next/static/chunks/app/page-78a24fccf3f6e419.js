(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},2625:function(e,t,a){Promise.resolve().then(a.bind(a,6148))},6148:function(e,t,a){"use strict";a.d(t,{default:function(){return D}});var s=a(7437),r=a(2265),n=e=>{let{mensaje:t}=e;return(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-100 mb-6 text-center shadow-neonWhite animate-pulse",children:t})},o=a(6648),l=e=>{let{onDrop:t}=e,[a,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=e=>{let a=e.clipboardData?.items;if(a){let e=Array.from(a).filter(e=>"file"===e.kind).map(e=>e.getAsFile()).filter(e=>null!==e);e.length>0&&t(e)}};return document.addEventListener("paste",e),()=>{document.removeEventListener("paste",e)}},[t]),(0,s.jsx)("div",{onDrop:e=>{e.preventDefault(),n(!1),t(Array.from(e.dataTransfer.files))},onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:e=>{e.preventDefault(),n(!1)},style:{border:"2px dashed #ccc",borderRadius:"20px",padding:"60px",textAlign:"center",marginBottom:"20px",cursor:"pointer",backgroundColor:a?"#f0f9ff":"#f9f9f9",transition:"background-color 0.3s ease, transform 0.3s ease",boxShadow:a?"0 10px 20px rgba(0, 150, 136, 0.2)":"0 4px 12px rgba(0, 0, 0, 0.1)",transform:a?"scale(1.02)":"scale(1)"},children:(0,s.jsx)("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"18px",color:"#333",transition:"color 0.3s ease"},children:a?"\xa1Suelta aqu\xed la imagen!":"Arrastra y suelta una imagen aqu\xed o p\xe9gala desde el portapapeles"})})},i=a(4176),c=a.n(i),d=()=>(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(c(),{color:"#ffffff",size:50})}),u=e=>{let{onDrop:t,onUpload:a,loading:r,selectedImages:n,onRemoveImage:i}=e;return(0,s.jsxs)("div",{className:"w-full max-w-6xl mx-auto relative",children:[" ",r&&(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-50",children:[(0,s.jsx)(d,{})," "]}),(0,s.jsx)(l,{onDrop:t}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:a,multiple:!0,className:"mb-4 block text-gray-900"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[" ",n.map((e,t)=>(0,s.jsxs)("div",{className:"relative group w-full h-80 overflow-hidden rounded-lg shadow-lg hover:shadow-2xl transition-shadow duration-300",children:[(0,s.jsx)(o.default,{src:e,alt:`Uploaded ${t}`,layout:"fill",objectFit:"cover",className:"transition-transform duration-300 transform hover:scale-105"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)("button",{onClick:()=>i(t),className:"absolute top-3 right-3 bg-red-600 text-white rounded-full p-2 hover:bg-red-500 transition-all duration-200 transform hover:scale-110 focus:outline-none",children:(0,s.jsx)("span",{className:"text-xl",children:"\xd7"})})]},t))]})]})};let h=e=>{for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e.join("\n")},m=()=>{let e=["izzi","izz!","izi","iz!!"];return e[Math.floor(Math.random()*e.length)]},p=(e,t)=>{let a=[`ðŸŒŸ \xa1Buen d\xeda ${e}! ðŸŒŸ
Te saluda ${t||`un asesor de ${m()}`},`,`ðŸŽ‰ \xa1Qu\xe9 tal, ${e}! 
Soy ${t||`un representante de ${m()}`},`,` \xa1Saludos, ${e}! ðŸ“¢
Aqu\xed ${t||`desde ${m()}`},`,`âœ¨ \xa1Hola! ${e}! âœ¨
Mi nombre es ${t||`y soy parte de ${m()}`},`];return a[Math.floor(Math.random()*a.length)]},g=(e,t,a,s)=>{if("Personalizado"===a)return` \xa1Hola ${e}! ðŸŒŸ
${s}

Atentamente, ${t||`Asesor de ${m()}`}`;let r=[`ðŸ“¡ Solo Internet: 100 megas por $369`,`ðŸ“º Internet + TV: 80 megas por $489`,`ðŸ“¡ 100 megas de Internet + caja smart y100 canales por $519`,`ðŸ“¶internet +Netflix + streamings + caja smart y cable por $679`],n=h([`ðŸ“¶ Internet 100 megas: $369`,`ðŸ“º Internet 80 megas + Cable: $489`,`ðŸ“¡ Internet 100 megas + 100 canales: $519`,`ðŸ“¶internet +Netflix + streamings + caja smart y cable por $679`]),o=h(r),l=["\xa1No pierdas esta oportunidad!","\xa1Aprovecha ahora y cont\xe1ctame!","Estoy aqu\xed para resolver tus dudas.","Quedo atento."],i=()=>l[Math.floor(Math.random()*l.length)],c=[`${p(e,t)}

Actualmente, sabemos que est\xe1s pagando el precio regular. \xa1Pero tenemos promociones para ti! Aqu\xed te dejo algunas opciones:

${n}

${i()}`,`${p(e,t)}

Hemos revisado tu cuenta y podemos ofrecerte estas nuevas promociones!:

${n}

${i()}`,`${p(e,t)}

\xa1No te pierdas nuestras nuevas ofertas! Aqu\xed te dejo las opciones disponibles:

${n}

${i()}`],d=[`${p(e,t)}

Estamos emocionados de ofrecerte estas promociones exclusivas:

${o}

${i()}`,`${p(e,t)}

\xa1Te tenemos una oferta especial! Aqu\xed tienes nuestras promociones:

${o}

${i()}`,`${p(e,t)}

Nos encantar\xeda que aproveches nuestras ofertas. Aqu\xed tienes las opciones:

${o}

${i()}`];switch(a){case"Clientes":default:return c[Math.floor(Math.random()*c.length)];case"Nuevos":return d[Math.floor(Math.random()*d.length)]}};var x=a(4834),f=a(1942),b=e=>{let{onSelect:t}=e,[a,n]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute bottom-2 left-2 cursor-pointer",onClick:()=>n(e=>!e),children:(0,s.jsx)(f.sr,{size:24})}),a&&(0,s.jsx)("div",{className:"absolute bottom-12 left-2 z-50",children:(0,s.jsx)(x.ZP,{onEmojiClick:e=>{t(e.emoji),n(!1)}})})]})},j=e=>{let{names:t,phoneNumbers:a,messages:r,disabledButtons:n,onSendWhatsAppMessage:o}=e;return(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200 text-gray-800",children:[(0,s.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Nombre"}),(0,s.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"p-3 hidden md:table-cell",children:"Mensaje"}),(0,s.jsx)("th",{className:"p-3 hidden md:table-cell",children:"WhatsApp"}),(0,s.jsx)("th",{className:"p-3 block md:hidden",children:"Acci\xf3n"})]})}),(0,s.jsx)("tbody",{children:t.map((e,t)=>(0,s.jsxs)("tr",{className:`transition hover:bg-gray-200 text-gray-800 ${t%2==0?"bg-white":"bg-gray-50"}`,children:[(0,s.jsx)("td",{className:"p-3 hidden md:table-cell ",children:e}),(0,s.jsx)("td",{className:"p-3 hidden md:table-cell",children:a[t]}),(0,s.jsx)("td",{className:"p-3 hidden md:table-cell overflow-hidden text-ellipsis whitespace-nowrap",title:r[t],children:r[t].length>50?r[t].substring(0,50)+"...":r[t]}),(0,s.jsx)("td",{className:"p-3 hidden md:table-cell",children:(0,s.jsx)("button",{onClick:()=>o(a[t],e,r[t],t),className:`px-4 py-2 ${n.has(t)?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-400"} text-white rounded-full transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-300`,disabled:n.has(t),children:n.has(t)?"Enviado":"Enviar WhatsApp"})}),(0,s.jsx)("td",{className:"p-3 block md:hidden",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("span",{className:"block text-sm",children:e}),(0,s.jsx)("span",{className:"block text-sm",children:a[t]}),(0,s.jsx)("button",{onClick:()=>o(a[t],e,r[t],t),className:`px-4 py-2 ${n.has(t)?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-400"} text-white rounded-full transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-300`,disabled:n.has(t),children:n.has(t)?"Enviado":"Enviar WhatsApp"})]})})]},t))})]})})},v=a(7800);let N=(e,t,a,s)=>{let r=e.map((e,r)=>({Nombre:e,Telefono:t[r]||"",Mensaje:a[r]||"",Macros:s[r]||""})),n=v.P6.json_to_sheet(r,{header:["Nombre","Telefono","Mensaje","Macros"]}),o=v.P6.book_new();v.P6.book_append_sheet(o,n,"Datos"),v.NC(o,"datos.xlsx")};var y=e=>{let{names:t,phoneNumbers:a,messages:r,macros:n,onClear:o}=e;return(0,s.jsx)("button",{onClick:()=>{N(t,a,r,n),o()},className:"mt-6 px-4 py-2 bg-gray-700 text-gray-100 rounded hover:bg-gray-600 transition",children:"Generar Excel"})};let w=e=>{let t=new Blob([e.map(e=>e.replace(/^\+52\s?1?/,"")).join("\n")],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="numeros_telefonicos.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a)};var $=e=>{let{phoneNumbers:t,onClear:a}=e;return(0,s.jsx)("button",{onClick:()=>{w(t),a()},className:"mt-6 px-4 py-2 bg-gray-700 text-gray-100 rounded hover:bg-gray-600 transition",children:"Generar Archivo TXT"})},S=e=>{let{names:t,phoneNumbers:a,messages:n,macros:o,loading:l}=e,[i,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[g,x]=(0,r.useState)([]),[f,b]=(0,r.useState)(new Set);return(0,r.useEffect)(()=>{let e=new Set,s=[],r=[],l=[],i=[];a.forEach((a,c)=>{e.has(a)||(e.add(a),s.push(t[c]),r.push(a),l.push(n[c]),i.push(o[c]))}),c(s),h(r),p(l),x(i)},[t,a,n,o]),(0,r.useEffect)(()=>{let e=JSON.stringify({names:i,phoneNumbers:u,messages:m,macros:g});localStorage.setItem("tableData",e)},[i,u,m,g]),(0,s.jsxs)("div",{className:"relative",children:[l&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-50 bg-gray-800 bg-opacity-50",children:(0,s.jsx)(d,{})}),(0,s.jsx)(j,{names:i,phoneNumbers:u,messages:m,macros:g,disabledButtons:f,onSendWhatsAppMessage:(e,t,a,s)=>{let r=/Mobi|Android|iPhone|iPad|iPod/.test(navigator.userAgent)?`https://wa.me/${e}?text=${encodeURIComponent(a)}`:`https://web.whatsapp.com/send?phone=${e}&text=${encodeURIComponent(a)}`;window.open(r,"_blank"),b(e=>new Set(e).add(s))}}),(0,s.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,s.jsx)(y,{names:i,phoneNumbers:u,messages:m,macros:g,onClear:()=>localStorage.removeItem("tableData")}),(0,s.jsx)($,{phoneNumbers:u,onClear:()=>localStorage.removeItem("tableData")})]})]})},C=a(3435),E=a.n(C);let k=e=>{let t=e.split("\n"),a=[],s=[],r=new Set;return t.forEach(e=>{let t=e.split(/\s+/);if(t.length>1){let e=t.slice(0,-1).join(" "),n=t[t.length-1].replace(/[^0-9]/g,"");n.length>=10&&!r.has(n)&&(r.add(n),a.push(e),s.push(n))}}),{names:a,phoneNumbers:s}};var A=e=>{let{selectedImages:t,setNames:a,setPhoneNumbers:n}=e,o=e=>e.startsWith("+52")?e:`+52 1 ${e}`,l=e=>{let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)throw Error("No se pudo obtener el contexto 2D del canvas");t.width=1.2*e.width,t.height=1.2*e.height,a.drawImage(e,0,0,1.2*e.width,1.2*e.height);let s=a.getImageData(0,0,t.width,t.height),r=s.data;for(let e=0;e<r.length;e+=4){let t=.3*r[e]+.5*r[e+1]+.5*r[e+2];r[e]=.7*t,r[e+1]=.7*t,r[e+2]=.7*t}return a.putImageData(s,0,0),t},i=(0,r.useCallback)(async()=>{let e=[],s=[];for(let a of t)try{let t=new Image;t.src=a,await new Promise(e=>{t.onload=e});let r=l(t).toDataURL("image/png"),{data:{text:n}}=await E().recognize(r,"eng"),{names:i,phoneNumbers:c}=k(n),d=c.map(o);e.push(...i),s.push(...d)}catch(e){console.error("Error durante el reconocimiento de texto:",e)}let r=Math.max(e.length,s.length),i=e.slice(0,r),c=s.slice(0,r);for(;i.length<r;)i.push("");for(;c.length<r;)c.push("00000");a(i),n(c)},[t,a,n]);return(0,r.useEffect)(()=>{t.length>0&&i()},[t,i]),(0,s.jsx)("div",{})},I=e=>{let{className:t}=e,[a,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=setTimeout(()=>n(!0),100);return()=>clearTimeout(e)},[]),(0,s.jsx)("div",{className:`flex justify-center mb-4 ${t}`,children:(0,s.jsx)(o.default,{src:"/espartano.png",alt:"Logo",width:96,height:96,className:`transform transition-transform transition-opacity duration-1000 ${a?"scale-100 opacity-100":"scale-150 opacity-0"} shadow-neon`})})},M=a(998);let z=e=>{let t=e.split(" ");return t.length>0?t[0]:""};var D=()=>{let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[c,d]=(0,r.useState)("Nuevos"),[h,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[f,j]=(0,r.useState)(!1),v=a.map(z),N=v.map(e=>g(e,h,c,p)),y=e=>encodeURIComponent(e),w=v.map((e,t)=>`="https://wa.me/${l[t]}?text=${y(N[t])}"`),$=e=>{j(!0);let a=e.map(e=>URL.createObjectURL(e));t(e=>e.concat(a)),j(!1)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 space-y-6",children:[(0,s.jsx)("button",{onClick:async()=>{await (0,M.signOut)(),window.location.href="/auth/signin"},className:"absolute top-4 right-4 bg-red-500 text-white py-2 px-4 rounded-lg shadow-lg hover:bg-red-700 transition-transform transform hover:scale-105",children:"Logout"}),(0,s.jsx)(I,{}),(0,s.jsx)(n,{mensaje:"Espartanos Web App v 1.0 Beta"}),(0,s.jsx)("input",{type:"text",placeholder:"Ingresa tu nombre",value:h,onChange:e=>m(e.target.value),className:"p-3 bg-gray-800 text-white border border-gray-700 rounded-lg w-full max-w-md focus:outline-none focus:border-blue-500 transition-all"}),(0,s.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"p-3 bg-gray-800 text-white border border-gray-700 rounded-lg w-full max-w-md focus:outline-none focus:border-blue-500 transition-all",children:[(0,s.jsx)("option",{value:"Nuevos",children:"Nuevos"}),(0,s.jsx)("option",{value:"Clientes",children:"Clientes"}),(0,s.jsx)("option",{value:"Personalizado",children:"Personalizado"})]}),"Personalizado"===c&&(0,s.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,s.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Ingresa tu mensaje personalizado aqu\xed...",className:"p-3 bg-gray-800 text-white border border-gray-700 rounded-lg w-full focus:outline-none focus:border-blue-500 transition-all",rows:4}),(0,s.jsx)("div",{className:"absolute bottom-3 left-3",children:(0,s.jsx)(b,{onSelect:e=>{x(p+e)}})})]}),(0,s.jsx)(u,{onDrop:e=>$(e),onUpload:e=>{e.target.files&&$(Array.from(e.target.files))},selectedImages:e,onRemoveImage:e=>{t(t=>t.filter((t,a)=>a!==e))},loading:f}),(0,s.jsx)(A,{selectedImages:e,setNames:o,setPhoneNumbers:i}),v.length>0&&l.length>0&&(0,s.jsx)("div",{className:"mt-6 w-full max-w-6xl",children:(0,s.jsx)(S,{names:v,phoneNumbers:l,messages:N,macros:w,loading:f,onGenerateExcel:()=>{console.log("Generando archivo Excel...")}})})]})}}},function(e){e.O(0,[425,699,560,998,876,971,23,744],function(){return e(e.s=2625)}),_N_E=e.O()}]);